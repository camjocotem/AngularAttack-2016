!function(){"use strict";var e=angular.module("PongApp");e.controller("PongController",["$scope","$interval",function(e,o){function n(e){return angular.element(document.querySelector(e))[0].getBoundingClientRect()}function l(o){82!==o.height&&e.paddleOne.height<82&&(o.height=o.height+o.movementSpeed)}function t(e){5!==e.height&&e.height>5&&(e.height=e.height-e.movementSpeed)}function d(e,o,n){e.xSpeed<=2.4?e.xSpeed=1.1*e.xSpeed:(o.movementSpeed=1.05*o.movementSpeed,n.movementSpeed=1.05*n.movementSpeed),e.ySpeed=1.1*e.ySpeed}function a(o){o.score=o.score+1,3===o.score?(e.gameOver=!0,o.text="Winner!",e.winningPlayer=o.number,e.losingPlayer=1===o.number?1:2):o.text="Score!",e.roundIsOver=!0,e.stopMatch()}function p(e,o){return e.right>=o.left&&e.top<o.bottom&&e.bottom>o.top}function r(e,o){return e.left<=o.right&&e.top<o.bottom&&e.bottom>o.top}e.playerOne={},e.playerTwo={},e.playerOne.score=0,e.playerTwo.score=0,e.playerOne.number=1,e.playerTwo.number=2,e.roundNumber=0,e.instructionsHaveBeenRead=!1;var m,c=n("#pongField"),i=(c.bottom-c.top)/100;e.newRound=function(){e.paddleOne={},e.paddleOne.height=5,e.paddleOne.movementSpeed=2,e.paddleOne.moving=!1,e.playerOne.text="",e.paddleTwo={},e.paddleTwo.height=81,e.paddleTwo.movementSpeed=2,e.paddleTwo.moving=!1,e.playerTwo.text="",e.ball={},e.ball.yLoc=44,e.ball.xLoc=49,e.ball.xMovement="right",e.ball.yMovement="down",e.ball.xSpeed=.8,e.ball.ySpeed=.2,e.roundIsOver=!1,e.matchStarted=!1,e.roundNumber=e.roundNumber+1},e.newRound(),e.closeInstructions=function(){e.instructionsHaveBeenRead=!0},e.playAgain=function(){e.playerOne.score=0,e.playerTwo.score=0,e.roundNumber=0,e.gameOver=!1,e.roundIsOver=!1,e.matchStarted=!1,e.newRound()},e.startMatch=function(){e.matchStarted=!0,m=o(function(){var o=n("#pongBall"),m=n("#paddleOne"),u=n("#paddleTwo");e.paddleOne.moving===!0&&("down"===e.paddleOne.yMovement&&l(e.paddleOne),"up"===e.paddleOne.yMovement&&t(e.paddleOne)),e.paddleTwo.moving===!0&&("down"===e.paddleTwo.yMovement&&l(e.paddleTwo),"up"===e.paddleTwo.yMovement&&t(e.paddleTwo)),"right"===e.ball.xMovement?p(o,u)?(e.ball.xMovement="left",d(e.ball,e.paddleOne,e.paddleTwo)):(e.ball.xLoc=e.ball.xLoc+e.ball.xSpeed,o.right>=c.right&&a(e.playerOne)):r(o,m)?(e.ball.xMovement="right",d(e.ball,e.paddleOne,e.paddleTwo)):(e.ball.xLoc=e.ball.xLoc-e.ball.xSpeed,o.left<=c.left&&a(e.playerTwo)),"down"===e.ball.yMovement?o.bottom+i>=c.bottom?e.ball.yMovement="up":e.ball.yLoc=e.ball.yLoc+e.ball.ySpeed:o.top-i<=c.top?e.ball.yMovement="down":e.ball.yLoc=e.ball.yLoc-e.ball.ySpeed},25)},e.stopMatch=function(){o.cancel(m)},e.movePaddle=function(o){"KeyS"===o.code&&(e.paddleOne.moving=!0,e.paddleOne.yMovement="down"),"KeyW"===o.code&&(e.paddleOne.moving=!0,e.paddleOne.yMovement="up"),"KeyK"===o.code&&(e.paddleTwo.moving=!0,e.paddleTwo.yMovement="down"),"KeyI"===o.code&&(e.paddleTwo.moving=!0,e.paddleTwo.yMovement="up")},e.stopPaddle=function(o){"KeyS"!==o.code&&"KeyW"!==o.code||(e.paddleOne.moving=!1),"KeyK"!==o.code&&"KeyI"!==o.code||(e.paddleTwo.moving=!1)}}])}(window.angular);