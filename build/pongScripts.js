angular.module("PongApp",[]),function(){"use strict";var e=angular.module("PongApp");e.controller("PongController",["$scope","$interval","pongMovementService",function(e,o,n){function d(e){return angular.element(document.querySelector(e))[0].getBoundingClientRect()}function l(o){o.score=o.score+1,3===o.score?(e.gameOver=!0,o.text="Winner!",e.winningPlayer=o.number,1===o.number?e.losingPlayer=2:e.losingPlayer=1):o.text="Score!",e.roundIsOver=!0,e.stopMatch()}e.playerOne={},e.playerTwo={},e.playerOne.score=0,e.playerTwo.score=0,e.playerOne.number=1,e.playerTwo.number=2,e.roundNumber=0,e.instructionsHaveBeenRead=!1;var t,a=d("#pongField"),p=(a.bottom-a.top)/100;e.newRound=function(){e.paddleOne={},e.paddleOne.height=5,e.paddleOne.movementSpeed=2,e.paddleOne.moving=!1,e.playerOne.text="",e.paddleTwo={},e.paddleTwo.height=81,e.paddleTwo.movementSpeed=2,e.paddleTwo.moving=!1,e.playerTwo.text="",e.ball={},e.ball.yLoc=44,e.ball.xLoc=49,e.ball.xMovement="right",e.ball.yMovement="down",e.ball.xSpeed=.8,e.ball.ySpeed=.2,e.roundIsOver=!1,e.matchStarted=!1,e.roundNumber=e.roundNumber+1},e.newRound(),e.closeInstructions=function(){e.instructionsHaveBeenRead=!0},e.playAgain=function(){e.playerOne.score=0,e.playerTwo.score=0,e.roundNumber=0,e.gameOver=!1,e.roundIsOver=!1,e.matchStarted=!1,e.newRound()},e.startMatch=function(){e.matchStarted=!0,t=o(function(){var o=d("#pongBall"),t=d("#paddleOne"),r=d("#paddleTwo");e.paddleOne.moving===!0&&("down"===e.paddleOne.yMovement&&n.movePaddleDown(e.paddleOne),"up"===e.paddleOne.yMovement&&n.movePaddleUp(e.paddleOne)),e.paddleTwo.moving===!0&&("down"===e.paddleTwo.yMovement&&n.movePaddleDown(e.paddleTwo),"up"===e.paddleTwo.yMovement&&n.movePaddleUp(e.paddleTwo)),"right"===e.ball.xMovement?n.ballMadeContactWithRightPaddle(o,r)?(e.ball.xMovement="left",n.increaseBallAndPaddleSpeed(e.ball,e.paddleOne,e.paddleTwo)):(e.ball.xLoc=e.ball.xLoc+e.ball.xSpeed,o.right>=a.right&&l(e.playerOne)):n.ballMadecontactWithLeftPaddle(o,t)?(e.ball.xMovement="right",n.increaseBallAndPaddleSpeed(e.ball,e.paddleOne,e.paddleTwo)):(e.ball.xLoc=e.ball.xLoc-e.ball.xSpeed,o.left<=a.left&&l(e.playerTwo)),"down"===e.ball.yMovement?o.bottom+p>=a.bottom?e.ball.yMovement="up":e.ball.yLoc=e.ball.yLoc+e.ball.ySpeed:o.top-p<=a.top?e.ball.yMovement="down":e.ball.yLoc=e.ball.yLoc-e.ball.ySpeed},25)},e.stopMatch=function(){o.cancel(t)},e.movePaddle=function(o){"KeyS"===o.code&&(e.paddleOne.moving=!0,e.paddleOne.yMovement="down"),"KeyW"===o.code&&(e.paddleOne.moving=!0,e.paddleOne.yMovement="up"),"KeyK"===o.code&&(e.paddleTwo.moving=!0,e.paddleTwo.yMovement="down"),"KeyI"===o.code&&(e.paddleTwo.moving=!0,e.paddleTwo.yMovement="up")},e.stopPaddle=function(o){"KeyS"!==o.code&&"KeyW"!==o.code||(e.paddleOne.moving=!1),"KeyK"!==o.code&&"KeyI"!==o.code||(e.paddleTwo.moving=!1)}}])}(window.angular),function(){"use strict";angular.module("PongApp").factory("pongMovementService",function(){var e={};return e.movePaddleDown=function(e){82!==e.height&&e.height<82&&(e.height=e.height+e.movementSpeed)},e.movePaddleUp=function(e){5!==e.height&&e.height>5&&(e.height=e.height-e.movementSpeed)},e.increaseBallAndPaddleSpeed=function(e,o,n){e.xSpeed<=2.4?e.xSpeed=1.1*e.xSpeed:(o.movementSpeed=1.05*o.movementSpeed,n.movementSpeed=1.05*n.movementSpeed),e.ySpeed=1.1*e.ySpeed},e.ballMadeContactWithRightPaddle=function(e,o){return e.right>=o.left&&e.top<o.bottom&&e.bottom>o.top},e.ballMadecontactWithLeftPaddle=function(e,o){return e.left<=o.right&&e.top<o.bottom&&e.bottom>o.top},e})}(window.angular);